generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Admin {
  id    Int    @id @default(autoincrement())
  email String @unique
  senha String
}

model Categoria {
  id    Int     @id @default(autoincrement())
  nome  String
  itens Item[]
}

model Item {
  id          Int     @id @default(autoincrement())
  nome        String
  descricao   String?
  preco       Float
  precoP       Float?
  precoM       Float?
  precoG       Float?
  precoGG      Float?
  precoPComBorda   Float?
  precoMComBorda   Float?
  precoGComBorda   Float?
  precoGGComBorda  Float?
  imagemUrl   String?
  disponivel  Boolean      @default(true)
  order       Int          @default(1000)
  pedidosItem PedidoItem[]
  categoria   Categoria @relation(fields: [categoriaId], references: [id])
  categoriaId Int
}

model SessaoMesa {
  id         Int       @id @default(autoincrement())
  mesa       String
  abertaEm   DateTime  @default(now())
  fechadaEm  DateTime?
  pedidos    Pedido[]
}

model Pedido {
  id           Int          @id @default(autoincrement())
  nomeCliente  String
  telefone     String
  endereco     String
  observacoes  String?
  itens        PedidoItem[]
  criadoEm     DateTime      @default(now())
  status       Int           @default(1)
  metodoPagamento String?
  trocoPara       Float?
  taxaEntrega     Float?
  sessaoMesa   SessaoMesa?  @relation(fields: [sessaoMesaId], references: [id])
  sessaoMesaId Int?
}

model PedidoItem {
  id           Int         @id @default(autoincrement())
  pedido       Pedido      @relation(fields: [pedidoId], references: [id])
  pedidoId     Int
  item         Item        @relation(fields: [itemId], references: [id])
  itemId       Int
  quantidade   Int
  tamanho      String?
  precoFinal   Float?
  borda        Borda?      @relation(fields: [bordaId], references: [id])
  bordaId      Int?
  precoBorda   Float?
  tipoMassa    TipoMassa?  @relation(fields: [tipoMassaId], references: [id])
  tipoMassaId  Int?
}

model Horarios {
  diaDaSemana Int     @id
  nome        String
  aberto      Boolean
  inicio      String
  fim         String
}

model Entrega {
  id          Int   @id @default(autoincrement())
  taxaEntrega Float
}

model Borda {
  id          Int          @id @default(autoincrement())
  nome        String
  precoP      Float
  precoM      Float
  precoG      Float
  precoGG     Float
  disponivel  Boolean      @default(true)
  pedidosItem PedidoItem[]
}

model TipoMassa {
  id          Int          @id @default(autoincrement())
  nome        String
  disponivel  Boolean      @default(true)
  pedidosItem PedidoItem[]
}

model ConfiguracaoLoja {
  id            Int @id @default(autoincrement())
  numeroDeMesas Int @default(10)
}